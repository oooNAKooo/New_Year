<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ üéÑ</title>
<style>
body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(180deg, #0f2027, #203a43, #2c5364);
    color: #fff;
    text-align: center;
    min-height: 100vh;
    overflow: hidden;
}

.card {
    background: rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(8px);
    border-radius: 20px;
    padding: 35px;
    max-width: 520px;
    margin: 120px auto;
    box-shadow: 0 20px 40px rgba(0,0,0,0.4);
    position: relative;
    z-index: 2;
}

input, button {
    padding: 12px;
    font-size: 18px;
    border-radius: 10px;
    border: none;
    margin-top: 10px;
}

button {
    cursor: pointer;
    background: #00c6ff;
    color: #000;
}

.hidden { display: none; }

/* ‚ùÑÔ∏è –°–ù–ï–ì */
.snowflake {
    position: fixed;
    top: -10px;
    color: white;
    pointer-events: none;
    animation: fall linear infinite;
    z-index: 1;
}

@keyframes fall {
    from { transform: translateY(0); opacity: 1; }
    to   { transform: translateY(110vh); opacity: 0.3; }
}

/* üéÜ Canvas */
canvas {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
}
</style>
</head>
<body>

<canvas id="confetti"></canvas>

<!-- –∞—É–¥–∏–æ —Å–∞–ª—é—Ç–∞ -->
<audio id="fireworkSound" src="https://raw.githubusercontent.com/oooNAKooo/New_Year/main/mixkit-fireworks-bang-in-sky-2989.wav" preload="auto"></audio>

<!-- –∞—É–¥–∏–æ —Ä–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–æ–π –º—É–∑—ã–∫–∏ -->
<audio id="christmasMusic" src="https://raw.githubusercontent.com/oooNAKooo/New_Year/main/christmas.mp3" preload="auto" loop></audio>

<div class="card">
    <h1 id="title">üéÅ –ß–µ–π —ç—Ç–æ –ø–æ–¥–∞—Ä–æ–∫?</h1>
    <div id="form">
        <input id="nameInput" placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—ë –∏–º—è">
        <br>
        <button onclick="checkName()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <p id="error" style="color:#ffb3b3;"></p>
    </div>
    <div id="greeting" class="hidden">
        <p id="message"></p>
        <div>‚ùÑÔ∏è 2026 ‚ùÑÔ∏è</div>
    </div>
</div>

<script>
// ‚ùÑÔ∏è —Å–Ω–µ–≥
for (let i = 0; i < 50; i++) {
    const s = document.createElement("div");
    s.className = "snowflake";
    s.textContent = "‚ùÑ";
    s.style.left = Math.random() * 100 + "vw";
    s.style.fontSize = Math.random() * 18 + 10 + "px";
    s.style.animationDuration = Math.random() * 10 + 15 + "s";
    document.body.appendChild(s);
}

// –∏–º—è –∏–∑ QR (?name=...)
const params = new URLSearchParams(window.location.search);
const correctName = params.get("name")?.toLowerCase();

// –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è
const greetings = {
    "–±–∞–±—É—à–∫–∞":   "üíê –î–æ—Ä–æ–≥–∞—è –±–∞–±—É—à–∫–∞, —Å –ù–æ–≤—ã–º –≥–æ–¥–æ–º! –ü—É—Å—Ç—å –≤ –∂–∏–∑–Ω–∏ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —Ä–∞–¥–æ—Å—Ç–∏ –∏ —É—é—Ç–∞ ‚ú® –≠—Ç–æ—Ç –ø–æ–¥–∞—Ä–æ–∫ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è!",
};

// Canvas –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

class Particle {
    constructor(x, y, color, dx, dy, r) {
        this.x = x; this.y = y;
        this.color = color;
        this.dx = dx; this.dy = dy;
        this.r = r;
        this.life = 200;
    }
    update() {
        this.x += this.dx;
        this.y += this.dy;
        this.life--;
        this.r *= 0.995;
    }
    draw() {
        ctx.beginPath();
        ctx.fillStyle = this.color;
        ctx.arc(this.x, this.y, this.r, 0, Math.PI*2);
        ctx.fill();
    }
}

let confetti = [];

function burstConfetti() {
    const cx = canvas.width/2;
    const cy = canvas.height/2;
    for (let i = 0; i < 200; i++) {
        const a = Math.random() * Math.PI*2;
        const speed = Math.random() * 4 + 1;
        confetti.push(new Particle(
            cx, cy,
            `hsl(${Math.random()*360},100%,70%)`,
            Math.cos(a)*speed,
            Math.sin(a)*speed,
            Math.random()*5 + 3
        ));
    }
    animateConfetti();
}

function animateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confetti.forEach(p => { p.update(); p.draw(); });
    confetti = confetti.filter(p => p.life > 0);
    if (confetti.length > 0) requestAnimationFrame(animateConfetti);
}

// –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ –∏ –∑–∞–ø—É—Å–∫ —Å–∞–ª—é—Ç–∞ + –º—É–∑—ã–∫–∏
function checkName() {
    const input = document.getElementById("nameInput").value.trim().toLowerCase();
    const error = document.getElementById("error");
    const music = document.getElementById("christmasMusic");
    const firework = document.getElementById("fireworkSound");

    if (!correctName) {
        error.textContent = "‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å—Å—ã–ª–∫–∏ (QR-–∫–æ–¥ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω)";
        return;
    }
    if (input !== correctName) {
        error.textContent = "‚ùå –≠—Ç–æ—Ç –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥—Ä—É–≥–æ–º—É —á–µ–ª–æ–≤–µ–∫—É";
        return;
    }

    // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –∏–∑–º–µ–Ω—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
    document.getElementById("form").classList.add("hidden");
    document.getElementById("title").textContent = "üéÑ –° –ù–æ–≤—ã–º –≥–æ–¥–æ–º!";
    document.getElementById("greeting").classList.remove("hidden");
    document.getElementById("message").textContent = greetings[input] || "üéÑ –° –ù–æ–≤—ã–º –≥–æ–¥–æ–º!";

    // –°—Ç–∞—Ä—Ç –º—É–∑—ã–∫–∏, –µ—Å–ª–∏ –µ—â—ë –Ω–µ –∏–≥—Ä–∞–µ—Ç
    if (music.paused) music.play().catch(() => {});

    // –¢—Ä–æ–π–Ω–æ–π —Å–∞–ª—é—Ç
    const playFirework = () => { firework.currentTime=0; burstConfetti(); };
    playFirework();
    setTimeout(playFirework, 500);
    setTimeout(playFirework, 1000);
}

// —Å—Ç–∞—Ä—Ç –º—É–∑—ã–∫–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞ (–±—Ä–∞—É–∑–µ—Ä —Ç—Ä–µ–±—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ)
window.addEventListener("DOMContentLoaded", () => {
    const music = document.getElementById("christmasMusic");
    const startMusic = () => {
        music.play().catch(() => {});
        document.removeEventListener("click", startMusic);
        document.removeEventListener("keydown", startMusic);
    };
    document.addEventListener("click", startMusic);
    document.addEventListener("keydown", startMusic);
});
</script>

</body>
</html>
